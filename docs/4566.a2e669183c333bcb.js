"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[4566],{4566:(A,m,o)=>{o.r(m),o.d(m,{PermissionModule:()=>T});var l=o(177),d=o(7062),r=o(9417),u=o(3471),t=o(3953),p=o(643),b=o(3197),F=o(2016),g=o(2702),h=o(9947),f=o(8834);function v(s,c){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td",20)(4,"a",21),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.onEdit(n))}),t.j41(5,"i",22),t.EFF(6,"edit"),t.k0s()(),t.j41(7,"a",23),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.onDelete(n.id))}),t.j41(8,"i",24),t.EFF(9,"close"),t.k0s()()()()}if(2&s){const e=c.$implicit;t.R7$(2),t.JRh(e.name)}}function k(s,c){if(1&s&&(t.j41(0,"div",16)(1,"app-card",17)(2,"div",14)(3,"table",18)(4,"thead")(5,"th"),t.EFF(6,"\u0627\u0633\u0645 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629"),t.k0s(),t.nrm(7,"th"),t.k0s(),t.j41(8,"tbody"),t.DNE(9,v,10,1,"tr",19),t.nI1(10,"async"),t.k0s()()()()()),2&s){const e=t.XpG();t.R7$(9),t.Y8G("ngForOf",t.bMT(10,1,e.permissionFacade.AllGroup$))}}function I(s,c){if(1&s){const e=t.RV6();t.j41(0,"td")(1,"input",29),t.bIt("change",function(n){const a=t.eBV(e).$implicit,D=t.XpG(3);return t.Njj(D.onCheckboxChange(n,a.id))}),t.k0s(),t.j41(2,"label",30),t.EFF(3),t.k0s()()}if(2&s){const e=c.$implicit,i=t.XpG(3);t.R7$(),t.Y8G("checked",i.isSelected(e.id)),t.R7$(2),t.SpI(" ",e.name,"")}}function j(s,c){if(1&s&&(t.j41(0,"tbody")(1,"tr")(2,"td"),t.EFF(3),t.k0s(),t.DNE(4,I,4,2,"td",19),t.k0s()()),2&s){const e=c.$implicit,i=t.XpG().ngIf;t.R7$(2),t.BMQ("rowspan",i[e].length),t.R7$(),t.JRh(e),t.R7$(),t.Y8G("ngForOf",i[e])}}function P(s,c){if(1&s){const e=t.RV6();t.j41(0,"table",25)(1,"thead")(2,"th")(3,"div",26)(4,"input",27),t.bIt("change",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.onSelectAll(n))}),t.k0s(),t.j41(5,"label",28),t.EFF(6,"\u0627\u0644\u0643\u0644"),t.k0s()()(),t.j41(7,"tr")(8,"th"),t.EFF(9,"\u0627\u0633\u0645 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"),t.k0s(),t.j41(10,"th"),t.EFF(11,"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"),t.k0s()()(),t.DNE(12,j,5,3,"tbody",19),t.k0s()}if(2&s){const e=c.ngIf,i=t.XpG();t.R7$(12),t.Y8G("ngForOf",i.Object.keys(e))}}const C=[{path:"",component:(()=>{class s{constructor(e,i,n,a){this.fb=e,this.permissionFacade=i,this.sharedFacade=n,this.cdr=a,this.edit=!1,this.selectedPermissionIds=[],this.registerForm=this.fb.group({id:[""],name:["",r.k0.required],permissions:[this.selectedPermissionIds,r.k0.required]}),this.permissionsData={},this.Object=Object}ngOnInit(){this.onSubmit(),this.edit=!1,this.subscription=this.permissionFacade.permission$.subscribe(e=>{this.permissionsData=e})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}onSubmit(){this.registerForm.controls.id.setValue(""),this.permissionFacade.GetAllGroup(),this.permissionFacade.GetAllPermission()}onDelete(e){this.edit=!1,this.selectedPermissionIds=[],this.permissionFacade.deleteGroup(e),this.registerForm.reset()}onReset(){this.edit=!1,this.selectedPermissionIds=[],this.registerForm.reset(),this.registerForm.setErrors(null)}onAdd(){if(0!=this.registerForm.value.permissions?.length&&0!=this.selectedPermissionIds.length)return this.registerForm.valid?this.edit?(this.permissionFacade.UpdateGroup(this.registerForm?.value),void this.onReset()):(this.permissionFacade.AddGroup(this.registerForm?.value),void this.onReset()):void this.sharedFacade.showMessage(u.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629",[""]);this.sharedFacade.showMessage(u.Go.warning,"\u0627\u0636\u0627\u0641\u0629 \u0645\u062c\u0645\u0648\u0639\u0629",["\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0644\u0645\u062c\u0645\u0648\u0639\u0629"])}isSelected(e){return this.selectedPermissionIds.includes(e)}onCheckboxChange(e,i){if(e.target.checked)this.selectedPermissionIds.push(i);else{const n=this.selectedPermissionIds.indexOf(i);-1!==n&&this.selectedPermissionIds.splice(n,1)}this.registerForm.controls.permissions.setValue(this.selectedPermissionIds)}onSelectAll(e){if(e.target.checked){const i=Object.values(this.permissionsData).flat().map(n=>n.id);this.selectedPermissionIds=i}else this.selectedPermissionIds=[];this.registerForm.controls.permissions.setValue(this.selectedPermissionIds)}onEdit(e){this.selectedPermissionIds=[],Object.keys(e.permissions).forEach(i=>{e.permissions[i].forEach(n=>{this.selectedPermissionIds.push(n.id)})}),this.registerForm.patchValue(e),this.registerForm.controls.permissions.setValue(this.selectedPermissionIds),this.edit=!0}static#t=this.\u0275fac=function(i){return new(i||s)(t.rXU(r.ok),t.rXU(p.y),t.rXU(b.I),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-evaluations-types"]],decls:24,vars:8,consts:[[1,"row"],[1,"col-sm-12"],["cardTitle","\u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0627\u062a",3,"options"],[1,"col-md-5"],["action","javascript:",1,"row","g-3","align-items-center",3,"formGroup"],[1,"col-7"],["for","inlineFormInputName"],["type","text","required","","formControlName","name","id","inlineFormInputName",1,"form-control"],[1,"col-12","align-self-end"],["type","button",1,"btn","btn-md","btn-themeAdd","has-ripple",3,"click"],["type","button",1,"btn","btn-md","btn-themeNew","has-ripple",3,"click"],["class","col-md-7",4,"ngIf"],[1,"col-xl-12"],["cardTitle","\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a","cardClass","Recent-Users","blockClass","p-0"],[1,"table-responsive"],["class","table table-hover mb-0",4,"ngIf"],[1,"col-md-7"],["cardTitle","\u0639\u0631\u0636 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0627\u062a","cardClass","Recent-Users ","blockClass","p-0"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[1,"td-actions"],["mat-button","","type","button","aria-hidden","true","data-notify","dismiss",1,"edit","mat-button",3,"click"],[1,"material-icons","text-warning"],["mat-button","","type","button","aria-hidden","true","data-notify","dismiss",1,"close","mat-button",3,"click"],[1,"material-icons","text-danger"],[1,"table","table-hover","mb-0"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change"],[1,"form-check-label","px-0"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"form-check-label","px-2"]],template:function(i,n){1&i&&(t.j41(0,"div",0),t.nrm(1,"app-loading")(2,"app-messages"),t.j41(3,"div",1)(4,"app-card",2)(5,"div",0)(6,"div",3)(7,"form",4)(8,"div",5)(9,"label",6),t.EFF(10,"\u0627\u0633\u0645 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629"),t.k0s(),t.nrm(11,"input",7),t.k0s(),t.j41(12,"div",8)(13,"button",9),t.bIt("click",function(){return n.onAdd()}),t.EFF(14,"\u062d\u0641\u0638"),t.k0s(),t.j41(15,"button",10),t.bIt("click",function(){return n.onReset()}),t.EFF(16,"\u062c\u062f\u064a\u062f"),t.k0s()()()(),t.DNE(17,k,11,3,"div",11),t.nI1(18,"async"),t.k0s()()(),t.j41(19,"div",12)(20,"app-card",13)(21,"div",14),t.DNE(22,P,13,1,"table",15),t.nI1(23,"async"),t.k0s()()()()),2&i&&(t.R7$(4),t.Y8G("options",!1),t.R7$(3),t.Y8G("formGroup",n.registerForm),t.R7$(10),t.Y8G("ngIf",t.bMT(18,4,n.permissionFacade.AllGroup$)),t.R7$(5),t.Y8G("ngIf",t.bMT(23,6,n.permissionFacade.permission$)))},dependencies:[l.Sq,l.bT,r.qT,r.me,r.BC,r.cb,r.YS,r.j4,r.JD,F.q,g.y,h.i,f.It,l.Jj]})}return s})(),data:{breadcrumb:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"}}];let y=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.$C({type:s});static#s=this.\u0275inj=t.G2t({imports:[d.iI.forChild(C),d.iI]})}return s})();var G=o(6401),_=o(1786),R=o(3719),$=o(4823),E=o(2765);let T=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.$C({type:s});static#s=this.\u0275inj=t.G2t({providers:[p.y,G.g],imports:[l.MD,y,r.X1,_.G,R.RG,$.uc,E.g7,h.i,f.Hl]})}return s})()}}]);