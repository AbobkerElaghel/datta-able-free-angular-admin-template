"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[189],{189:(Q,f,r)=>{r.r(f),r.d(f,{BankBranchesModule:()=>H});var p=r(177),S=r(3719),G=r(9631),E=r(4823),o=r(9417),F=r(1626),e=r(3953),y=r(1441);let B=(()=>{class s{constructor(t,a){this.http=t,this.appConfig=a,this.url=this.appConfig.defaultUrl}AddBranch(t){return this.http.post(`${this.url}/api/Branches/AddBranch?culture=ar-LY`,t)}UpdateBranch(t){return this.http.put(`${this.url}/api/Branches/UpdateBranch?culture=ar-LY`,t)}DeleteBranch(t){return this.http.delete(`${this.url}/api/Branches/DeleteBranch?Id=${t}&culture=ar-LY`)}GetBranch(t,a,n){let i=new F.Nl;return""!=a&&null!=a&&(i=i.set("BankId",a)),""!=n&&null!=n&&(i=i.set("BankClasscificationId",n)),i=i.set("IsActive",t),i=i.set("culture","ar-LY"),this.http.get(`${this.url}/api/Branches/GetBranchs`,{params:i})}static#e=this.\u0275fac=function(a){return new(a||s)(e.KVO(F.Qq),e.KVO(y.o))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();var k=r(7062),c=r(3471),R=r(4412),d=r(6496),m=r(8141),b=r(1025),g=r(3197);let v=(()=>{class s{constructor(t,a){this.sharedFacade=t,this.bankBranchesServices=a,this.BankBranchesSubject$=new R.t([]),this.BankBranches$=this.BankBranchesSubject$.asObservable()}deleteBranch(t){const a=this.bankBranchesServices.DeleteBranch(t).pipe((0,m.M)(n=>{if(n.type==c.yl.Success){this.sharedFacade.showMessage(c.Go.success," \u062d\u0630\u0641 \u0641\u0631\u0639 \u0627\u0644\u0645\u0635\u0631\u0641",["\u062a\u0645 \u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d"]);const u=this.BankBranchesSubject$.getValue().filter(h=>h.id!=t);this.BankBranchesSubject$.next(u),this.BankBranchesSubject$.subscribe()}else this.sharedFacade.showMessage(c.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0630\u0641",n.messages)}),(0,d.t)());this.sharedFacade.showLoaderUntilCompleted(a).pipe().subscribe()}GetBranch(t,a){const n=this.bankBranchesServices.GetBranch(1,t,a).pipe((0,m.M)(i=>{i.type==c.yl.Success?this.BankBranchesSubject$.next(i.content):(this.BankBranchesSubject$.next([]),this.sharedFacade.showMessage(c.Go.error,"\u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u062c\u0644\u0628 \u0641\u0631\u0648\u0639",i.messages))}),(0,d.t)());this.sharedFacade.showLoaderUntilCompleted(n).pipe().subscribe()}AddBranch(t){const a=this.bankBranchesServices.AddBranch(t).pipe((0,m.M)(n=>{if(n.type==c.yl.Success){this.sharedFacade.showMessage(c.Go.success,"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d",n.messages);const i=this.BankBranchesSubject$.getValue();this.BankBranchesSubject$.next((0,b.jM)(i,u=>{t.id=n.content,u.unshift(t)}))}else this.sharedFacade.showMessage(c.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",n.messages)}),(0,d.t)());this.sharedFacade.showLoaderUntilCompleted(a).pipe().subscribe()}UpdateBranch(t){const a=this.bankBranchesServices.UpdateBranch(t).pipe((0,m.M)(n=>{if(n.type==c.yl.Success){this.sharedFacade.showMessage(c.Go.success,"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d",n.messages);const i=this.BankBranchesSubject$.getValue();this.BankBranchesSubject$.next((0,b.jM)(i,u=>{const h=u.findIndex(K=>K.id===t.id);u[h]=t})),this.BankBranchesSubject$.subscribe()}else this.sharedFacade.showMessage(c.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u062a\u0639\u062f\u064a\u0644",n.messages)}),(0,d.t)());this.sharedFacade.showLoaderUntilCompleted(a).pipe().subscribe()}static#e=this.\u0275fac=function(a){return new(a||s)(e.KVO(g.I),e.KVO(B))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();var j=r(3303),$=r(9456),I=r(8834),M=r(2016),A=r(2702),C=r(9947);function T(s,l){if(1&s&&(e.j41(0,"option",26),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI("",t.name," ")}}function N(s,l){if(1&s&&(e.j41(0,"option",26),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI("",t.name," ")}}function V(s,l){if(1&s&&(e.j41(0,"option",26),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI("",t.name," ")}}function D(s,l){if(1&s&&(e.j41(0,"option",26),e.EFF(1),e.k0s()),2&s){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI("",t.name," ")}}function U(s,l){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td",27)(10,"a",28),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.onEdit(n))}),e.j41(11,"i",29),e.EFF(12,"edit"),e.k0s()(),e.j41(13,"a",30),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.onDelete(n.id))}),e.j41(14,"i",31),e.EFF(15,"close"),e.k0s()()()()}if(2&s){const t=l.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.prefix),e.R7$(2),e.JRh(t.bankName),e.R7$(2),e.JRh(t.bankClasscificationName)}}const Y=[{path:"",component:(()=>{class s{constructor(t,a,n,i,u){this.fb=t,this.bankBranchesFacade=a,this.banksFacade=n,this.classificationBankBranchesFacade=i,this.sharedFacade=u,this.edit=!1,this.registerForm=this.fb.group({id:[""],name:["",o.k0.required],prefix:[null,[o.k0.required,o.k0.maxLength(3)]],bankId:["",o.k0.required],bankName:[],bankClasscificationId:["",o.k0.required],bankClasscificationName:[]}),this.registerFormSearch=this.fb.group({bankId:["",o.k0.required],classcificationId:["",o.k0.required]}),this.onSubmit()}ngOnInit(){this.edit=!1,this.getBanks(),this.getClassificationBank()}onSubmit(){this.registerForm.controls.id.setValue(""),this.bankBranchesFacade.GetBranch("","")}onSearch(){this.registerForm.controls.id.setValue(""),this.bankBranchesFacade.GetBranch(this.registerFormSearch.value.bankId,this.registerFormSearch.value.classcificationId)}getBanks(){this.banksFacade.GetBanks()}getClassificationBank(){this.classificationBankBranchesFacade.GetClassificationBranch()}onDelete(t){this.edit=!1,this.bankBranchesFacade.deleteBranch(t),this.registerForm.reset()}onReset(){this.edit=!1,this.registerForm.reset(),this.registerForm.setErrors(null),this.registerFormSearch.reset(),this.registerFormSearch.setErrors(null),this.onSubmit()}onAdd(){if(this.registerForm.valid){const t=this.classificationBankBranchesFacade.ClassificationBranchSubject$.getValue(),a=this.banksFacade.BanksSubject$.getValue().find(h=>h.id==this.registerForm.value.bankId),i=t.find(h=>h.id==this.registerForm.value.bankClasscificationId).name??null,u=a?.name??null;this.registerForm.controls.bankClasscificationName.setValue(i),this.registerForm.controls.bankName.setValue(u),this.edit?(this.bankBranchesFacade.UpdateBranch(this.registerForm?.value),this.onReset()):(this.bankBranchesFacade.AddBranch(this.registerForm?.value),this.onReset())}else{if(""==this.registerForm.value.name||this.registerForm.controls.name.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0641\u0631\u0639",[""]);if(null==this.registerForm.value.prefix||this.registerForm.controls.prefix.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u0631\u0645\u0632 ",[""]);if(this.registerForm.controls.bankId.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0635\u0631\u0641",[""]);if(this.registerForm.controls.bankClasscificationId.invalid)return void this.sharedFacade.showMessage(c.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u062a\u0635\u0646\u064a\u0641 \u0641\u0631\u0639 \u0627\u0644\u0645\u0635\u0631\u0641",[""])}}onEdit(t){this.registerForm.patchValue(t),this.edit=!0}onInput(t){const a=t.target;a.value.length>3&&(a.value=a.value.slice(0,3))}static#e=this.\u0275fac=function(a){return new(a||s)(e.rXU(o.ok),e.rXU(v),e.rXU(j.I),e.rXU($.T),e.rXU(g.I))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-rewards-types"]],decls:76,vars:18,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["action","javascript:",3,"formGroup"],[1,"form-group","col-md-2"],["for","inlineFormInputName"],["type","text","required","","formControlName","name","id","inlineFormInputName",1,"form-control"],["for","inlineFormInputPrefix"],["type","number","maxlength","3","required","","formControlName","prefix","id","inlineFormInputPrefix",1,"form-control",3,"input"],[1,"form-group","col-md-3","align-self-end"],["formControlName","bankId","required","","aria-label","select example",1,"form-select"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","bankClasscificationId","required","","aria-label","select example",1,"form-select"],["type","button",1,"btn","btn-md","btn-themeAdd","has-ripple",3,"click"],["type","button",1,"btn","btn-md","btn-themeNew","has-ripple",3,"click"],[1,"col-xl-12"],["cardTitle","\u0627\u0644\u0628\u062d\u062b","blockClass","table-border-style",3,"options"],["action","javascript:",1,"row","row-cols-md-auto","g-3","align-items-center",3,"formGroup"],[1,"form-group","col-md-3"],["formControlName","classcificationId","required","","aria-label","select example",1,"form-select"],[1,"col-12","align-self-end"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[3,"value"],[1,"td-actions","text-right"],["mat-button","","type","button","aria-hidden","true","data-notify","dismiss",1,"edit","mat-button",3,"click"],[1,"material-icons","text-warning"],["mat-button","","type","button","aria-hidden","true","data-notify","dismiss",1,"close","mat-button",3,"click"],[1,"material-icons","text-danger"]],template:function(a,n){1&a&&(e.j41(0,"div",0),e.nrm(1,"app-loading")(2,"app-messages"),e.j41(3,"div",1)(4,"div",2)(5,"div",3)(6,"form",4)(7,"div",0)(8,"div",5)(9,"label",6),e.EFF(10,"\u0627\u0633\u0645 \u0627\u0644\u0641\u0631\u0639"),e.k0s(),e.nrm(11,"input",7),e.k0s(),e.j41(12,"div",5)(13,"label",8),e.EFF(14,"\u0627\u0644\u0631\u0645\u0632"),e.k0s(),e.j41(15,"input",9),e.bIt("input",function(u){return n.onInput(u)}),e.k0s()(),e.j41(16,"div",10)(17,"label"),e.EFF(18,"\u0627\u0644\u0645\u0635\u0631\u0641"),e.k0s(),e.j41(19,"select",11)(20,"option",12),e.EFF(21,"\u0627\u062e\u062a\u0631 \u0645\u0635\u0631\u0641"),e.k0s(),e.DNE(22,T,2,2,"option",13),e.nI1(23,"async"),e.k0s()(),e.j41(24,"div",10)(25,"label"),e.EFF(26,"\u062a\u0635\u0646\u064a\u0641 \u0641\u0631\u0639 \u0627\u0644\u0645\u0635\u0631\u0641"),e.k0s(),e.j41(27,"select",14)(28,"option",12),e.EFF(29,"\u0627\u062e\u062a\u0631 \u062a\u0635\u0646\u064a\u0641"),e.k0s(),e.DNE(30,N,2,2,"option",13),e.nI1(31,"async"),e.k0s()()(),e.j41(32,"button",15),e.bIt("click",function(){return n.onAdd()}),e.EFF(33,"\u062d\u0641\u0638"),e.k0s(),e.j41(34,"button",16),e.bIt("click",function(){return n.onReset()}),e.EFF(35,"\u062c\u062f\u064a\u062f"),e.k0s()()()()(),e.j41(36,"div",17)(37,"app-card",18)(38,"form",19)(39,"div",20)(40,"label"),e.EFF(41,"\u0627\u0644\u0645\u0635\u0631\u0641"),e.k0s(),e.j41(42,"select",11)(43,"option",12),e.EFF(44,"\u0627\u062e\u062a\u0631 \u0645\u0635\u0631\u0641"),e.k0s(),e.DNE(45,V,2,2,"option",13),e.nI1(46,"async"),e.k0s()(),e.j41(47,"div",20)(48,"label"),e.EFF(49,"\u062a\u0635\u0646\u064a\u0641 \u0641\u0631\u0639 \u0627\u0644\u0645\u0635\u0631\u0641"),e.k0s(),e.j41(50,"select",21)(51,"option",12),e.EFF(52,"\u0627\u062e\u062a\u0631 \u062a\u0635\u0646\u064a\u0641"),e.k0s(),e.DNE(53,D,2,2,"option",13),e.nI1(54,"async"),e.k0s()(),e.j41(55,"div",22)(56,"button",15),e.bIt("click",function(){return n.onSearch()}),e.EFF(57,"\u0628\u062d\u062b"),e.k0s()(),e.nrm(58,"br")(59,"br"),e.k0s(),e.nrm(60,"br"),e.j41(61,"div",23)(62,"table",24)(63,"thead")(64,"th"),e.EFF(65,"\u0627\u0644\u0627\u0633\u0645"),e.k0s(),e.j41(66,"th"),e.EFF(67,"\u0627\u0644\u0631\u0645\u0632"),e.k0s(),e.j41(68,"th"),e.EFF(69,"\u0627\u0644\u0645\u0635\u0631\u0641"),e.k0s(),e.j41(70,"th"),e.EFF(71,"\u062a\u0635\u0646\u064a\u0641 \u0641\u0631\u0639 \u0627\u0644\u0645\u0635\u0631\u0641"),e.k0s(),e.nrm(72,"th"),e.k0s(),e.j41(73,"tbody"),e.DNE(74,U,16,4,"tr",25),e.nI1(75,"async"),e.k0s()()()()()()),2&a&&(e.R7$(6),e.Y8G("formGroup",n.registerForm),e.R7$(16),e.Y8G("ngForOf",e.bMT(23,8,n.banksFacade.Banks$)),e.R7$(8),e.Y8G("ngForOf",e.bMT(31,10,n.classificationBankBranchesFacade.ClassificationBranch$)),e.R7$(7),e.Y8G("options",!1),e.R7$(),e.Y8G("formGroup",n.registerFormSearch),e.R7$(7),e.Y8G("ngForOf",e.bMT(46,12,n.banksFacade.Banks$)),e.R7$(8),e.Y8G("ngForOf",e.bMT(54,14,n.classificationBankBranchesFacade.ClassificationBranch$)),e.R7$(21),e.Y8G("ngForOf",e.bMT(75,16,n.bankBranchesFacade.BankBranches$)))},dependencies:[p.Sq,I.It,o.qT,o.xH,o.y7,o.me,o.Q0,o.wz,o.BC,o.cb,o.YS,o.tU,o.j4,o.JD,M.q,A.y,C.i,p.Jj]})}return s})(),data:{breadcrumb:"\u0641\u0631\u0648\u0639 \u0627\u0644\u0645\u0635\u0627\u0631\u0641"}}];let x=(()=>{class s{static#e=this.\u0275fac=function(a){return new(a||s)};static#t=this.\u0275mod=e.$C({type:s});static#s=this.\u0275inj=e.G2t({imports:[k.iI.forChild(Y),k.iI]})}return s})();var O=r(9183),L=r(1786),X=r(9861),w=r(9038),J=r(6600),P=r(2798);let H=(()=>{class s{static#e=this.\u0275fac=function(a){return new(a||s)};static#t=this.\u0275mod=e.$C({type:s});static#s=this.\u0275inj=e.G2t({providers:[v,B,j.I,X.U,$.T,w.e],imports:[p.MD,I.Hl,S.RG,G.fS,E.uc,o.X1,x,O.D6,L.G,J.Sy,P.Ve,C.i]})}return s})()}}]);