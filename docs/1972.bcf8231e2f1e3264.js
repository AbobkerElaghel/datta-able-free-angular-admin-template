"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[1972],{1972:(X,f,a)=>{a.r(f),a.d(f,{PenaltiesModule:()=>x});var h=a(177),v=a(8834),S=a(3719),C=a(9631),G=a(4823),l=a(9417),e=a(3953),I=a(1626),T=a(1441);let y=(()=>{class s{constructor(t,i){this.http=t,this.appConfig=i,this.url=this.appConfig.defaultUrl}AddPenalties(t){return this.http.post(`${this.url}/api/Penalty/AddPenalty?culture=ar-LY`,t)}UpdatePenalties(t){return this.http.put(`${this.url}/api/Penalty/UpdatePenalty?culture=ar-LY`,t)}DeletePenalties(t){return this.http.delete(`${this.url}/api/Penalty/DeletePenalty?Id=${t}&culture=ar-LY`)}GetPenalties(t){return this.http.get(`${this.url}/api/Penalty/GetPenalties?IsActive=${t}&culture=ar-LY`)}static#e=this.\u0275fac=function(i){return new(i||s)(e.KVO(I.Qq),e.KVO(T.o))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();var E=a(9183),M=a(1786),R=a(4412),u=a(6496),d=a(8141),o=a(3471),g=a(1025),b=a(3197);let P=(()=>{class s{constructor(t,i){this.sharedFacade=t,this.penaltiesServices=i,this.PenaltiesSubject$=new R.t([]),this.Penalties$=this.PenaltiesSubject$.asObservable()}deletePenalties(t){const i=this.penaltiesServices.DeletePenalties(t).pipe((0,d.M)(n=>{if(n.type==o.yl.Success){this.sharedFacade.showMessage(o.Go.success," \u062d\u0630\u0641 \u0645\u0643\u0627\u0641\u0623\u0629",["\u062a\u0645 \u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d"]);const c=this.PenaltiesSubject$.getValue().filter(F=>F.id!=t);this.PenaltiesSubject$.next(c),this.PenaltiesSubject$.subscribe()}else this.sharedFacade.showMessage(o.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062d\u0630\u0641",n.messages)}),(0,u.t)());this.sharedFacade.showLoaderUntilCompleted(i).pipe().subscribe()}GetPenalties(){const t=this.penaltiesServices.GetPenalties(1).pipe((0,d.M)(i=>{i.type==o.yl.Success?this.PenaltiesSubject$.next(i.content):(this.PenaltiesSubject$.next([]),this.sharedFacade.showMessage(o.Go.error,"\u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u062c\u0644\u0628 \u0627\u0644\u062c\u0632\u0627\u0621\u0627\u062a",i.messages))}),(0,u.t)());this.sharedFacade.showLoaderUntilCompleted(t).pipe().subscribe()}AddPenalties(t){const i=this.penaltiesServices.AddPenalties(t).pipe((0,d.M)(n=>{if(n.type==o.yl.Success){this.sharedFacade.showMessage(o.Go.success,"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d",n.messages);const r=this.PenaltiesSubject$.getValue();this.PenaltiesSubject$.next((0,g.jM)(r,c=>{t.id=n.content,c.unshift(t)}))}else this.sharedFacade.showMessage(o.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",n.messages)}),(0,u.t)());this.sharedFacade.showLoaderUntilCompleted(i).pipe().subscribe()}UpdatePenalties(t){const i=this.penaltiesServices.UpdatePenalties(t).pipe((0,d.M)(n=>{if(n.type==o.yl.Success){this.sharedFacade.showMessage(o.Go.success,"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d",n.messages);const r=this.PenaltiesSubject$.getValue();this.PenaltiesSubject$.next((0,g.jM)(r,c=>{const F=c.findIndex(L=>L.id===t.id);c[F]=t})),this.PenaltiesSubject$.subscribe()}else this.sharedFacade.showMessage(o.Go.error,"\u0644\u0645 \u062a\u062a\u0645 \u0639\u0645\u0644\u064a\u0629 \u062a\u0639\u062f\u064a\u0644",n.messages)}),(0,u.t)());this.sharedFacade.showLoaderUntilCompleted(i).pipe().subscribe()}static#e=this.\u0275fac=function(i){return new(i||s)(e.KVO(b.I),e.KVO(y))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac})}return s})();var j=a(7062);let p=[{value:1,label:"\u062a\u0623\u062e\u064a\u0631 \u0627\u0644\u0633\u0627\u0639\u0629"},{value:2,label:"\u063a\u064a\u0627\u0628 \u064a\u0648\u0645"},{value:3,label:"\u062a\u0623\u062e\u064a\u0631 \u0646\u0635\u0641 \u064a\u0648\u0645"}];var k=a(2016),U=a(2702),$=a(9947);function V(s,m){if(1&s&&(e.j41(0,"option",19),e.EFF(1),e.k0s()),2&s){const t=m.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI("",t.label," ")}}function A(s,m){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",20)(6,"a",21),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.onEdit(n))}),e.j41(7,"i",22),e.EFF(8,"edit"),e.k0s()(),e.j41(9,"a",23),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.onDelete(n.id))}),e.j41(10,"i",24),e.EFF(11,"close"),e.k0s()()()()}if(2&s){const t=m.$implicit;e.R7$(2),e.JRh(t.penaltyTypeName),e.R7$(2),e.JRh(t.discount)}}const D=[{path:"",component:(()=>{class s{constructor(t,i,n){this.fb=t,this.penaltiesFacade=i,this.sharedFacade=n,this.edit=!1,this.registerForm=this.fb.group({id:[""],penaltyTypeId:[null,l.k0.required],discount:[null,l.k0.required],penaltyTypeName:[""]}),this.optionsPenaltyType=p,this.onSubmit()}ngOnInit(){this.edit=!1}onSubmit(){this.registerForm.controls.id.setValue(""),this.penaltiesFacade.GetPenalties()}onDelete(t){this.edit=!1,this.penaltiesFacade.deletePenalties(t),this.registerForm.reset()}onReset(){this.edit=!1,this.registerForm.reset(),this.registerForm.setErrors(null)}onAdd(){if(this.registerForm.valid)this.registerForm.value.penaltyTypeName=p.find(t=>t.value==this.registerForm.value.penaltyTypeId)?.label,this.edit?(this.penaltiesFacade.UpdatePenalties(this.registerForm?.value),this.onReset()):(this.penaltiesFacade.AddPenalties(this.registerForm?.value),this.onReset());else{if(0==this.registerForm.value.penaltyTypeId||this.registerForm.controls.penaltyTypeId.invalid)return void this.sharedFacade.showMessage(o.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u062c\u0632\u0627\u0621  ",[""]);if(this.registerForm.controls.discount.invalid)return void this.sharedFacade.showMessage(o.Go.warning,"\u0639\u0641\u0648\u0627\u064b\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u062e\u0635\u0645",[""])}}onEdit(t){this.registerForm.patchValue(t),this.registerForm.value.penaltyTypeName=p.find(i=>i.value==this.registerForm.value.penaltyTypeId)?.label,this.edit=!0}static#e=this.\u0275fac=function(i){return new(i||s)(e.rXU(l.ok),e.rXU(P),e.rXU(b.I))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-rewards-types"]],decls:36,vars:6,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-body"],["action","javascript:",1,"row","g-3","align-items-center",3,"formGroup"],[1,"col-md-3"],["formControlName","penaltyTypeId","required","","aria-label","select example",1,"form-select"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","inlineFormInputName"],["type","number","required","","formControlName","discount","id","inlineFormInputName",1,"form-control"],[1,"col-12"],["type","button",1,"btn","btn-md","btn-themeAdd","has-ripple",3,"click"],["type","button",1,"btn","btn-md","btn-themeNew","has-ripple",3,"click"],[1,"col-xl-12"],["cardTitle","\u0627\u0644\u062c\u0632\u0627\u0621\u0627\u062a","blockClass","table-border-style",3,"options"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[3,"value"],[1,"td-actions"],["mat-button","","type","button","aria-hidden","true","data-notify","dismiss",1,"edit","mat-button",3,"click"],[1,"material-icons","text-warning"],["mat-button","","type","button","aria-hidden","true","data-notify","dismiss",1,"close","mat-button",3,"click"],[1,"material-icons","text-danger"]],template:function(i,n){1&i&&(e.j41(0,"div",0),e.nrm(1,"app-loading")(2,"app-messages"),e.j41(3,"div",1)(4,"div",2)(5,"div",3)(6,"form",4)(7,"div",5)(8,"label"),e.EFF(9,"\u0646\u0648\u0639 \u0627\u0644\u062c\u0632\u0627\u0621"),e.k0s(),e.j41(10,"select",6)(11,"option",7),e.EFF(12,"\u0627\u062e\u062a\u0631 ..."),e.k0s(),e.DNE(13,V,2,2,"option",8),e.k0s()(),e.j41(14,"div",5)(15,"label",9),e.EFF(16,"\u0627\u0644\u062e\u0635\u0645"),e.k0s(),e.nrm(17,"input",10),e.k0s(),e.j41(18,"div",11)(19,"button",12),e.bIt("click",function(){return n.onAdd()}),e.EFF(20,"\u062d\u0641\u0638"),e.k0s(),e.j41(21,"button",13),e.bIt("click",function(){return n.onReset()}),e.EFF(22,"\u062c\u062f\u064a\u062f"),e.k0s()()()()()(),e.j41(23,"div",14)(24,"app-card",15)(25,"div",16)(26,"table",17)(27,"thead")(28,"th"),e.EFF(29,"\u0646\u0648\u0639 \u0627\u0644\u062c\u0632\u0627\u0621"),e.k0s(),e.j41(30,"th"),e.EFF(31,"\u0633\u0627\u0639\u0627\u062a \u0627\u0644\u062e\u0635\u0645"),e.k0s(),e.nrm(32,"th"),e.k0s(),e.j41(33,"tbody"),e.DNE(34,A,12,2,"tr",18),e.nI1(35,"async"),e.k0s()()()()()()),2&i&&(e.R7$(6),e.Y8G("formGroup",n.registerForm),e.R7$(7),e.Y8G("ngForOf",n.optionsPenaltyType),e.R7$(11),e.Y8G("options",!1),e.R7$(10),e.Y8G("ngForOf",e.bMT(35,4,n.penaltiesFacade.Penalties$)))},dependencies:[h.Sq,v.It,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.BC,l.cb,l.YS,l.j4,l.JD,k.q,U.y,$.i,h.Jj]})}return s})(),data:{breadcrumb:"\u0627\u0644\u062c\u0632\u0627\u0621\u0627\u062a"}}];let N=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.$C({type:s});static#s=this.\u0275inj=e.G2t({imports:[j.iI.forChild(D),j.iI]})}return s})();var O=a(6600),Y=a(2798);let x=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.$C({type:s});static#s=this.\u0275inj=e.G2t({providers:[P,y],imports:[h.MD,v.Hl,S.RG,C.fS,G.uc,l.X1,N,E.D6,M.G,O.Sy,Y.Ve,$.i]})}return s})()}}]);