<div class="row">
  <app-loading></app-loading>
  <app-messages></app-messages>
  <!-- [ basic-collapse ] start -->
  <div class="col-sm-12">
    <div class="card">
      <div class="card-body">
        <form [formGroup]="registerFormSearch" action="javascript:" class="row  g-3 align-items-center ">
          <div class="row">
            <div class="col-md-3">
              <label> نوع البحث</label>
              <select (change)="onClean()" formControlName="searchType" class="form-select" required aria-label="select example">
                <option value="" selected disabled>اختر ...</option>
                <option value="1">رقم الموظف</option>
                <option value="2">اسم الموظف</option>
                <option value="3">رقم هاتف الموظف</option>
              </select>
            </div>
            <div class="col-md-3" *ngIf="registerFormSearch.value.searchType == '1'">
              <label> رقم الموظف</label>
              <input
                type="text" class="form-control" required formControlName="employeeCode"  id="employeeCode"   />

            </div>
          <div class="col-md-3"  *ngIf="registerFormSearch.value.searchType == '2'">
            <label> الموظف</label>
            <select (change)="onClean()"  formControlName="employeeName" class="form-select" required aria-label="select example">
              <option value="" selected disabled>اختر ...</option>
              <option *ngFor="let item of  employeeFacade.employee$ | async"
                      [value]="item.name">{{ item.name }}
              </option>
            </select>
          </div>
            <div class="col-md-3"  *ngIf="registerFormSearch.value.searchType == '3'">
              <label> رقم هاتف الموظف</label>
              <input
                type="text" required formControlName="phoneNumber" class="form-control" id="phoneNumber"   />

            </div>

            <div class="col-md-3  align-self-end">
            <button type="button" class="btn btn-outline-info" (click)="onSearch()">
              <i class="feather icon-info"></i>
              بحث
            </button>
            </div>
          </div>
          <hr/>
        </form>
        <form [formGroup]="registerForm" action="javascript:" class="row  g-3 align-items-center ">
        <div class="row " *ngIf="((employeeBonusesFacade.EmployeeBonuses$ | async ) != null) ">
            <div class="col-md-3">
              <label> المرتب الاساسي</label>
              <input disabled [value]="(employeeBonusesFacade.EmployeeBonuses$ | async).basicSalary" type="text" class="form-control" />
            </div>
            <div class="col-md-3">
              <label> إجمالي المرتب</label>
              <input disabled [value]="(employeeBonusesFacade.EmployeeBonuses$ | async).grossSalary"   type="text" class="form-control" />
            </div>
            <div class="col-md-3"  >
              <label> نوع العلاواة</label>
              <select formControlName="id" class="form-select" required aria-label="select example">
                <option value="" selected disabled>اختر ...</option>
                <option *ngFor="let item of employeeBonusesFacade.BonusesType$ | async"
                        [value]="item.id">{{ item.name }}
                </option>
              </select>
            </div>
          <div class="col-md-3">
            <label for="inlineFormInputName">القيمة</label>
            <input
              type="text" required formControlName="amount" class="form-control" id="inlineFormInputName" />
          </div>
          <!--            <div class="col-12  ">-->
          <div class=" col-md-3">
            <label >تاريخ الحصول عليها </label>
            <input
              type="datetime-local"  formControlName="dateOfGet" class="form-control" id="approvalDate"   />

          </div>
          </div>
          <div class="col-12  ">
            <button type="button" (click)="onAdd()" class="btn btn-md btn-themeAdd has-ripple">حفظ</button>
            <button type="button" (click)="onReset()" class="btn btn-md btn-themeNew has-ripple">جديد</button>
          </div>
        </form>


      </div>
    </div>
  </div>

  <div class="col-sm-12 mb-3" *ngIf="(employeeBonusesFacade.EmployeeBonuses$ | async) != null">
    <div class="card mb-0">
      <div class="card-header">
        <a
          class="btn btn-primary text-white me-2 mb-2"
          (click)="multiCollapsed1 = !multiCollapsed1"
          [attr.aria-expanded]="!multiCollapsed1"
          aria-controls="multiCollapseExample1"
        >
          علاوات الحالية
        </a>
<!--        $theme-color-tab-->
        <button
          class="btn btn-primary me-2 mb-2"
          (click)="multiCollapsed2 = !multiCollapsed2"
          [attr.aria-expanded]="!multiCollapsed2"
          type="button"
          aria-controls="multiCollapseExample2"
        >
          سجل علاوات
        </button>

      </div>
    </div>

    <div class="row">
      <div class="col-sm-6">
        <div class="multi-collapse mt-2" id="multiCollapseExample1" [ngbCollapse]="multiCollapsed1">
          <div class="card">
            <div class="card-body">
              <h5 *ngIf="(employeeBonusesFacade.EmployeeBonuses$ | async)?.bonus.length ==0">
                لا يوجد علاوات للموظف
              </h5>
              <div class="table-responsive">
              <table class="table table-striped  table-hover" *ngIf="(employeeBonusesFacade.EmployeeBonuses$ | async)?.bonus.length !=0">
                <thead>
                <th>اسم العلاوة</th>
                <th>القيمة</th>
                <th>تاريخ الحصول عليها</th>
                <th></th>
                </thead>
                <tbody>
                <tr *ngFor="let item of (employeeBonusesFacade.EmployeeBonuses$ | async).bonus; let i = index">
                  <td>{{ item.name }}</td>
                  <td>{{ item.amount }}</td>
                  <td>{{ item.dateOfGet | date }}</td>
                              <td class="td-actions ">
                    <button (click)="onCancel(item.id)" class="btn drp-icon btn-rounded btn-outline-warning" type="button">
                      <i class="feather icon-slash"></i>
                    </button>
                  </td>
                </tr>
                </tbody>
              </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="multi-collapse mt-2" id="multiCollapseExample2" [ngbCollapse]="multiCollapsed2">
          <div class="card">
            <div class="card-body">
              <h5 *ngIf="(employeeBonusesFacade.EmployeeBonuses$ | async)?.bonusHistory.length ==0">
                لا يوجد سجل علاوات للموظف
              </h5>
              <div class="table-responsive">
              <table *ngIf="(employeeBonusesFacade.EmployeeBonuses$ | async).bonusHistory.length !=0" class="table table-striped  table-hover" >
                <thead>
                <th>اسم العلاوة</th>
                <th>القيمة</th>
                <th>حالتها</th>
                <th>تاريخ الحصول عليها</th>
                <th>تاريخ إلغاءها</th>
                </thead>
                <tbody>
                <tr *ngFor="let item of (employeeBonusesFacade.EmployeeBonuses$ | async).bonusHistory; let i = index">
                  <td>{{ item.name }}</td>
                  <td>{{ item.amount }}</td>
                  <td>{{ item.isActive == 1? 'متحصل عليها' : item.isActive == 2? 'غير متاحة' : 'ملغية' }}</td>
                  <td>{{ item.dateOfGet | date }}</td>
                  <td>{{ item.isActive !=3 ? '' : item.deleteDate | date }}</td>

                </tr>
                </tbody>
              </table>
            </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<!--  <div class="col-xl-12">-->
<!--    -->
<!--    <app-card cardTitle="الجزاءات" [options]="false" blockClass="table-border-style">-->
<!--      <div class="table-responsive">-->
<!--        <table class="table table-striped  table-hover">-->
<!--          <thead>-->
<!--          <th>نوع الجزاء</th>-->
<!--          <th>ساعات الخصم</th>-->
<!--          <th></th>-->
<!--          </thead>-->
<!--          <tbody>-->
<!--          <tr *ngFor="let item of employeeBonusesFacade.EmployeeBonuses$ | async; let i = index">-->
<!--            <td>{{ item.penaltyTypeName }}</td>-->
<!--            <td>{{ item.discount }}</td>-->
<!--            <td class="td-actions ">-->
<!--              &lt;!&ndash;              <button (click)="onEdit(item)" type="button" class="btn btn-icon btn-warning"><i class="feather icon-edit"></i></button>&ndash;&gt;-->
<!--              &lt;!&ndash;              <button  (click)="onDelete(item.id)" type="button" class="btn btn-icon btn-danger"><i class="feather icon-x"></i></button>&ndash;&gt;-->
<!--              <a mat-button (click)="onEdit(item)" type="button"-->
<!--                 aria-hidden="true" class="edit mat-button " data-notify="dismiss"> <i-->
<!--                class="material-icons text-warning">edit</i></a>-->
<!--              <a mat-button (click)="onDelete(item.id)" type="button" aria-hidden="true" class="close mat-button"-->
<!--                 data-notify="dismiss"> <i class="material-icons text-danger">close</i></a>-->

<!--            </td>-->
<!--          </tr>-->
<!--          </tbody>-->
<!--        </table>-->
<!--      </div>-->
<!--    </app-card>-->
<!--  </div>-->
</div>




